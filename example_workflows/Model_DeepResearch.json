{"id":"da664114-8b96-47ee-a4eb-89977904c805","revision":0,"last_node_id":38,"last_link_id":35,"nodes":[{"id":29,"type":"KSampler","pos":[633.642822265625,568.9821166992188],"size":[270,262],"flags":{},"order":0,"mode":4,"inputs":[{"localized_name":"模型","name":"model","type":"MODEL","link":null},{"localized_name":"正面条件","name":"positive","type":"CONDITIONING","link":null},{"localized_name":"负面条件","name":"negative","type":"CONDITIONING","link":null},{"localized_name":"Latent图像","name":"latent_image","type":"LATENT","link":null},{"localized_name":"种子","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"步数","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"采样器名称","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"调度器","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"降噪","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"Latent","name":"LATENT","type":"LATENT","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.59","Node name for S&R":"KSampler"},"widgets_values":[70394008460132,"randomize",20,8,"euler","simple",1]},{"id":30,"type":"EmptyLatentImage","pos":[633.642822265625,868.9821166992188],"size":[270,106],"flags":{},"order":9,"mode":4,"inputs":[{"localized_name":"宽度","name":"width","type":"INT","widget":{"name":"width"},"link":32},{"localized_name":"高度","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"批量大小","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"Latent","name":"LATENT","type":"LATENT","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.59","Node name for S&R":"EmptyLatentImage"},"widgets_values":[512,512,1]},{"id":31,"type":"MarkdownNote","pos":[353.642822265625,798.9821166992188],"size":[260,170],"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["The following series of output ports in Civitai Parameter Unpacker can be directly connected to KSampler and Empty Latent Image nodes. This will make it easier for you to use these parameters. The output here is the parameter with the highest usage rate (if any item is empty, the default parameter will be output)"],"color":"#432","bgcolor":"#653"},{"id":32,"type":"CivitaiModelAnalyzerLORA","pos":[-6.357180595397949,578.9821166992188],"size":[310,242],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"model_name","name":"model_name","type":"COMBO","widget":{"name":"model_name"},"link":null},{"localized_name":"image_limit","name":"image_limit","type":"INT","widget":{"name":"image_limit"},"link":null},{"localized_name":"sort","name":"sort","type":"COMBO","widget":{"name":"sort"},"link":null},{"localized_name":"nsfw_level","name":"nsfw_level","type":"COMBO","widget":{"name":"nsfw_level"},"link":null},{"localized_name":"filter_type","name":"filter_type","type":"COMBO","widget":{"name":"filter_type"},"link":null},{"localized_name":"summary_top_n","name":"summary_top_n","type":"INT","widget":{"name":"summary_top_n"},"link":null},{"localized_name":"force_refresh","name":"force_refresh","type":"COMBO","widget":{"name":"force_refresh"},"link":null}],"outputs":[{"localized_name":"full_report_md","name":"full_report_md","type":"STRING","links":null},{"localized_name":"fetch_summary","name":"fetch_summary","type":"STRING","links":null},{"localized_name":"params_pipe","name":"params_pipe","type":"CIVITAI_PARAMS","links":null}],"properties":{"cnr_id":"civitai-recipe-finder","ver":"1031a02c39e6796a88ca778a3816ca479057cb56","Node name for S&R":"CivitaiModelAnalyzerLORA"},"widgets_values":["MoXinV1.safetensors",100,"Most Reactions","None","all",10,"no"]},{"id":33,"type":"MarkdownNote","pos":[-6.357180595397949,878.9821166992188],"size":[310,90],"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["If you want to obtain information about the LoRA model, please replace all the connections on ckpt with Lora Fetcher"],"color":"#432","bgcolor":"#653"},{"id":34,"type":"ShowText|pysssss","pos":[-6.357180595397949,38.982147216796875],"size":[310,90],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"text","name":"text","type":"STRING","link":33}],"outputs":[{"localized_name":"字符串","name":"STRING","shape":6,"type":"STRING","links":null}],"title":"Show Fetch Summary","properties":{"cnr_id":"comfyui-custom-scripts","ver":"1.2.5","Node name for S&R":"ShowText|pysssss"},"widgets_values":[]},{"id":35,"type":"MarkdownNote","pos":[-6.357180595397949,168.98214721679688],"size":[310,300],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["This node works as a **data analyzer**, used to collect and analyze the usage statistics of a selected model.\n\n## ⚙️ Parameters\n\n* **Model**: Select the model you want to analyze.\n* **image\\_limit**: Defines how many images to retrieve. Recommended not to exceed 500, otherwise it may take a long time.\n* **Sort**: Determines the order in which images are retrieved, applied to the first *max pages*.\n* **Force refresh**: Set to *Yes* to ignore the cache and fetch the latest data directly.\n* **filter\\_type**: Filter data type, supports `all` / `image` / `video`.\n* **nsfw\\_level**: Select the NSFW level for filtering.\n\n## 📊 Features & Outputs\n\n* **Frequency Analysis**\n\n  * Obtain the most frequently used **LoRA / CKPT** for the selected model.\n  * Obtain the most frequent **size, steps, CFG Scale, Sampler, Scheduler, VAE**, and other related parameters.\n  * Obtain the most frequent **positive / negative prompt words**, with output count controlled by `summary_top_n`.\n\n* **Model Check & Download**\n\n  * Automatically checks if required models (LoRA/CKPT, etc.) exist locally; if not, provides download links.\n---\n该节点作为一个 **数据分析器（data analyzer）**，用于统计和分析指定模型的使用情况。\n\n## ⚙️ 参数说明\n\n* **Model**：选择要分析的模型。\n* **image\\_limit**：定义要检索的图片数量。推荐不要超过 500 张，否则可能耗时较久。\n* **Sort**：控制图片的获取顺序，排序作用在前 *max pages* 内的数据。\n* **Force refresh**：设为 *Yes* 时会忽略缓存，直接获取最新数据。\n* **filter\\_type**：筛选数据类型，支持 `all` / `image` / `video`。\n* **nsfw\\_level**：选择 NSFW 的级别过滤。\n\n## 📊 功能与输出\n\n* **使用频率分析**\n\n  * 获取该模型下使用频率最高的 **LoRA / CKPT**。\n  * 获取最高频的 **分辨率（size）、步数（steps）、CFG Scale、采样器（Sampler）、调度器（Scheduler）、VAE** 等相关参数。\n  * 获取最高频的 **正向提示词 / 负向提示词**，输出数量可通过 `summary_top_n` 控制。\n\n* **模型检测与下载**\n\n  * 自动检测依赖模型（LoRA/CKPT 等）是否存在于本地；若不存在，则提供下载链接。"],"color":"#432","bgcolor":"#653"},{"id":36,"type":"MarkdownPresenter","pos":[343.642822265625,-251.01785278320312],"size":[560,720],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"text","name":"text","type":"STRING","link":34}],"outputs":[],"properties":{"cnr_id":"civitai-recipe-finder","ver":"697f70c87537cc940cc476b8fc23d18820da22b9","Node name for S&R":"MarkdownPresenter"},"widgets_values":[""],"color":"#332922","bgcolor":"#593930"},{"id":37,"type":"CivitaiParameterUnpacker","pos":[353.642822265625,578.9821166992188],"size":[260,226],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"params_pipe","name":"params_pipe","type":"CIVITAI_PARAMS","link":35}],"outputs":[{"localized_name":"ckpt_name","name":"ckpt_name","type":"COMBO","links":[]},{"localized_name":"positive_prompt","name":"positive_prompt","type":"STRING","links":[]},{"localized_name":"negative_prompt","name":"negative_prompt","type":"STRING","links":[]},{"localized_name":"seed","name":"seed","type":"INT","links":[]},{"localized_name":"steps","name":"steps","type":"INT","links":[32]},{"localized_name":"cfg","name":"cfg","type":"FLOAT","links":[]},{"localized_name":"sampler","name":"sampler","type":"COMBO","links":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","links":null},{"localized_name":"width","name":"width","type":"INT","links":null},{"localized_name":"height","name":"height","type":"INT","links":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","links":null}],"properties":{"cnr_id":"civitai-recipe-finder","ver":"1031a02c39e6796a88ca778a3816ca479057cb56","Node name for S&R":"CivitaiParameterUnpacker"},"widgets_values":[]},{"id":38,"type":"CivitaiModelAnalyzerCKPT","pos":[-6.357180595397949,-251.01785278320312],"size":[310,242],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"model_name","name":"model_name","type":"COMBO","widget":{"name":"model_name"},"link":null},{"localized_name":"image_limit","name":"image_limit","type":"INT","widget":{"name":"image_limit"},"link":null},{"localized_name":"sort","name":"sort","type":"COMBO","widget":{"name":"sort"},"link":null},{"localized_name":"nsfw_level","name":"nsfw_level","type":"COMBO","widget":{"name":"nsfw_level"},"link":null},{"localized_name":"filter_type","name":"filter_type","type":"COMBO","widget":{"name":"filter_type"},"link":null},{"localized_name":"summary_top_n","name":"summary_top_n","type":"INT","widget":{"name":"summary_top_n"},"link":null},{"localized_name":"force_refresh","name":"force_refresh","type":"COMBO","widget":{"name":"force_refresh"},"link":null}],"outputs":[{"localized_name":"full_report_md","name":"full_report_md","type":"STRING","links":[34]},{"localized_name":"fetch_summary","name":"fetch_summary","type":"STRING","links":[33]},{"localized_name":"params_pipe","name":"params_pipe","type":"CIVITAI_PARAMS","links":[35]}],"properties":{"cnr_id":"civitai-recipe-finder","ver":"1031a02c39e6796a88ca778a3816ca479057cb56","Node name for S&R":"CivitaiModelAnalyzerCKPT"},"widgets_values":["SDXL\\NoobAI-XL-Vpred-v1.0.safetensors",500,"Most Reactions","None","all",5,"no"]}],"links":[[32,37,4,30,0,"INT"],[33,38,1,34,0,"STRING"],[34,38,0,36,0,"STRING"],[35,38,2,37,0,"CIVITAI_PARAMS"]],"groups":[{"id":6,"title":"Useful Output Ports","bounding":[330,500,280,490],"color":"#3f789e","font_size":24,"flags":{}},{"id":7,"title":"Data Presenter","bounding":[330,-320,580,800],"color":"#3f789e","font_size":24,"flags":{}},{"id":8,"title":"LoRA Analyzer","bounding":[-20,500,330,490],"color":"#3f789e","font_size":24,"flags":{}},{"id":9,"title":"CKPT Analyzer","bounding":[-20,-320,330,800],"color":"#3f789e","font_size":24,"flags":{}},{"id":10,"title":"Convenient nodes for use","bounding":[620,500,290,490],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":0.7513148009015778,"offset":[853.204476570561,445.9945113824954]}},"version":0.4}